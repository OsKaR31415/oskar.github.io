<HTML>
<head>
    <title> Test date Oscar </title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="../../../../style.css">
</head>
<body>
<form>
<div id="aff">
</div>
Jour de la semaine
<select id="input_date">
  <option>Lundi</option>
  <option>Mardi</option>
  <option>Mercredi</option>
  <option>Jeudi</option>
  <option>Vendredi</option>
  <option>Samedi</option>
  <option>Dimanche</option>
</select>
<br><br>
<input type="button" onclick="check_date()" value="Valider">
</form>
</body>
<script language="javascript">
    input = document.getElementById("input_date");
    aff = document.getElementById("aff");

    DAYS = ["lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi", "dimanche"]

    function toDate(n){
      // TODO
        return "19/01/2021";
    }

    function compressMonthDay(month, day) {
        return 100 * month + day
    }

    function toDay(day, month, year){
        if ((month <= 2) & (day < 28)) {
            while (compressMonthDay(month, day) != compressMonthDay(2, 2)) {
                if (compressMonthDay(month, day) < compressMonthDay(2, 2)) {
                    if (day >= 30) {
                        day = 1
                        month += 1
                    } else {
                        day += 1
                    }
                } else {
                    if (day <= 1) {
                        day = 30
                        month -= 1
                    } else {
                        day -= 1
                    }
                }
            }
        } else {
            while (compressMonthDay(month, day) != compressMonthDay(8, 8)) {
                if (compressMonthDay(month, day) < compressMonthDay(8, 8)) {
                    if (day >= 30) {
                        day = 1
                        month += 1
                    } else {
                        day += 1
                    }
                    }
                    else {
                        if (day <= 30) {
                            day = 30
                            month -= 1
                        } else {
                            day -= 1
                        }
                    }
                }
            }
        }
        alert("the day is" + day.toString() + " / " + month.toString())

    }

    var doomsdays = {
        1898 : "lun",
        1899 : "mar",
        1900 : "mer",
        1901 : "jeu",
        1902 : "ven",
        1903 : "sam",
        1910 : "lun",
        1911 : "mar",
        1912 : "jeu",
        1913 : "ven",
        1914 : "sam",
        1915 : "dim",
        1921 : "lun",
        1922 : "mar",
        1923 : "mer",
        1924 : "ven",
        1925 : "sam",
        1926 : "dim",
        1932 : "lun",
        1933 : "mar",
        1934 : "mer",
        1935 : "jeu",
        1936 : "sam",
        1937 : "dim",
        1944 : "mar",
        1945 : "mer",
        1946 : "jeu",
        1947 : "ven",
        1948 : "dim",
        1955 : "lun",
        1956 : "mer",
        1957 : "jeu",
        1958 : "ven",
        1959 : "sam",
        1966 : "lun",
        1967 : "mar",
        1968 : "jeu",
        1969 : "ven",
        1970 : "sam",
        1971 : "dim",
        1977 : "lun",
        1978 : "mar",
        1979 : "mer",
        1980 : "ven",
        1981 : "sam",
        1982 : "dim",
        1988 : "lun",
        1989 : "mar",
        1990 : "mer",
        1991 : "jeu",
        1992 : "sam",
        1993 : "dim",
        2000 : "mar",
        2001 : "mer",
        2002 : "jeu",
        2003 : "ven",
        2004 : "dim",
        2011 : "lun",
        2012 : "mer",
        2013 : "jeu",
        2014 : "ven",
        2015 : "sam",
        2022 : "lun",
        2023 : "mar",
        2024 : "jeu",
        2025 : "ven",
        2026 : "sam",
        2027 : "dim",
        2033 : "lun",
        2034 : "mar",
        2035 : "mer",
        2036 : "ven",
        2037 : "sam",
        2038 : "dim",
        2044 : "lun",
        2045 : "mar",
        2046 : "mer",
        2047 : "jeu",
        2048 : "sam",
        2049 : "dim",
        2056 : "mar",
        2057 : "mer",
        2058 : "jeu",
        2059 : "ven",
        2060 : "dim",
        2067 : "lun",
        2068 : "mer",
        2069 : "jeu",
        2070 : "ven",
        2071 : "sam",
        2078 : "lun",
        2079 : "mar",
        2080 : "jeu",
        2081 : "ven",
        2082 : "sam",
        2083 : "dim",
        2089 : "lun",
        2090 : "mar",
        2091 : "mer",
        2092 : "ven",
        2093 : "sam",
        2094 : "dim"
    }

    var dayToLongDay = {
        "lun" : "Monday",
        "mar" : "Tuesday",
        "mer" : "Wednesday",
        "jeu" : "Thursday",
        "ven" : "Friday",
        "sam" : "Saturday",
        "dim" : "Sunday"
    }

    // pour stocker ta date secrÃ¨te 
    secretDate = {
      day: 0,
      month: 1,
      year: 1999,
      update: function(){
      year = Math.floor(Math.random() * 196) + 1898
      month = Math.floor(Math.random() * 12) + 1
      if (month == 2) {
          day = Math.floor(Math.random() * 27) + 1
      } else {
          day = Math.floor(Math.random() * 29) + 1
      }
      aff.innerText = day.toString() + " / " + month.toString() + " / " + year.toString()
      },
      good: function(d){d==toDay(day, month, year)},
    }


    function check_date() {
      let day_index = input.selectedIndex
      
      if (secretDate.good(day_index)){
          alert("good answer");
      }
      else {
        alert("bad answer")
        alert("The date changed")
      
        secretDate.update()
      }
      
    }

secretDate.update()
</script>
</HTML>
